<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <h:form id="gridsterForm" prependId="false">

        <p:growl id="growl" />

        <p:layout fullPage="true">

            <p:menubar>
                <p:menuitem value="Preview" icon="ui-icon-search" onclick="showPreviewDialog();" />
                <p:menuitem value="Save" icon="ui-icon-disk" onclick="serializeGridster(); document.getElementById('invisibleClickTarget').click(); return false;" />
            </p:menubar>

            <ui:remove>
                <p:commandButton id="preview" value="Preview" icon="ui-icon-search"/>
            </ui:remove>

            <br/>
            <br/>

            <div id="gridster" class="gridster" style="width: 600; height: 500; alignment-adjust: central;" >
                <ul>
                </ul>
            </div>

        </p:layout>

        <h:inputHidden id="serializedData" value="#{stageController.jsonModel}" />
        <h:inputHidden id="layoutLength" value="#{stageController.layoutLength}" />
        <h:inputHidden id="layoutWidth" value="#{stageController.layoutWidth}" />

        <h:commandButton id="invisibleClickTarget" style="display: none!important;">
            <f:ajax execute="@form" listener="#{stageController.saveStage}" />
        </h:commandButton>

    </h:form>

</ui:composition>